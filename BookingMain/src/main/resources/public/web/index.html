<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Website</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="css/all.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>
<body>
    <div class="header">
        <nav id="navBar">
            <img src="logo.png" alt="">
            <ul class="nav-links">
                        <li><a href="index.html" class="active">Home</a></li>
                        <li><a href="nofilter.html">All Rooms</a></li>
            </ul>
            <a href="/web/registration/index.html" class="register-btn">Login</a>
            <i class="fas fa-bars" onclick="togglebtn()"></i>
        </nav>
        <div class="container">
            <h1>Find Your Next Stay</h1>
            <div class="search-bar">
                <form>
                    <div class="location-input">
                        <label>County</label>
                        <input type="text" class="county" placeholder="Where are you going?">
                    </div>
                   
                    <button type="submit" class="submitbtn"><img src="search.png"></button>
					<a href="" class="submitlink" hidden></a>
                </form>
            </div>
        </div>
    </div>
    <div class="container">
        <h2 class="sub-title">Exclusives</h2>
        <div class="exclusives">
           <a href="listing.html?county=nakuru">
		    <div>
                <img src="image-1.png">
                <span>
                    <h3>Nakuru</h3>
                    <p>Starts @ $250</p>
                </span>
            </div>
		   </a>
		    <a href="listing.html?county=narobi">
            <div>
                <img src="image-2.png">
                <span>
                    <h3>Narobi</h3>
                    <p>Starts @ $250</p>
                </span>
            </div>
			</a>
			 <a href="listing.html?county=baringo">
            <div>
                <img src="image-3.png">
                <span>
                    <h3>Baringo</h3>
                    <p>Starts @ $250</p>
                </span>
            </div>
			</a>
			 <a href="listing.html?county=kisumu">
            <div>
                <img src="image-4.png">
                <span>
                    <h3>Kisumu</h3>
                    <p>Starts @ $250</p>
                </span>
            </div>
			</a>
			 <a href="listing.html?county=eldoret">
            <div>
                <img src="image-5.png">
                <span>
                    <h3>Eldoret</h3>
                    <p>Starts @ $250</p>
                </span>
            </div>
			</a>
			 <a href="listing.html?county=mombasa">
            <div>
                <img src="image-6.png">
                <span>
                    <h3>Mombasa</h3>
                    <p>Starts @ $250</p>
                </span>
            </div>
			</a>
			 <a href="listing.html?county=kiambu">
            <div>
                <img src="image-7.png">
                <span>
                    <h3>Kiambu</h3>
                    <p>Starts @ $250</p>
                </span>
            </div>
			</a>
			 <a href="listing.html?county=turkana">
            <div>
                <img src="image-8.png">
                <span>
                    <h3>Turkana</h3>
                    <p>Starts @ $250</p>
                </span>
            </div>
			</a>
			 <a href="listing.html?county=nyandarua">
            <div>
                <img src="image-9.png">
                <span>
                    <h3>Nyandarua</h3>
                    <p>Starts @ $250</p>
                </span>
            </div>
			</a>
			 <a href="listing.html?county=machakos">
            <div>
                <img src="image-10.png">
                <span>
                    <h3>Machakos</h3>
                    <p>Starts @ $250</p>
                </span>
            </div>
			</a>
        </div>
        <h2 class="sub-title">Trending Places</h2>
        <div class="trending">
            <div>
                <img src="dubai.png">
                <h3>Nairobi</h3>
            </div>
            <div>
                <img src="new-york.png">
                <h3>Nakuru</h3>
            </div>
            <div>
                <img src="paris.png">
                <h3>Mombasa</h3>
            </div>
            <div>
                <img src="new-delhi.png">
                <h3>Kisumu</h3>
            </div>
        </div>
        <div class="cta">
            <h3>Sharing Is Earning Now</h3>
            <p>Great opportunity to make money by<br>sharing your extra space</p>
			<p>Become a host.</p>
            <a href="/web/registration/index.html" class="cta-btn">Know More</a>
        </div>
        <h2 class="sub-title">Travellers Stories</h2>
        <div class="stories">
            <div>
                <img src="story-1.png">
                <p>Explore the fish in you, as you swim some of the cleanest pools.</p>
            </div>
            <div>
                <img src="story-2.png">
                <p>Enjoy views and ceneries like never before.</p>
            </div>
            <div>
                <img src="story-3.png">
                <p>Get to hike in popular places while you are at your stay.</p>
            </div>
        </div>
        <a href="/web/registration/index.html" class="start-btn">Start making money</a>
        <div class="about-msg">
            <h2>About Bookie</h2>
            <p>Get to find out hotel rooms near you. Book them and get to enjoy your staycation. A hotel is just a click away from you. Book rooms that accounts for your guests, book a meeting room for confrences, and have tons of fun doing it. Our responsive website shows how the future has been eased and we are here to make your life easier.</p>
        </div>
        <div class="footer">
            <a href="https://facebook.com/"><i class="fab fa-facebook-f"></i></a>
            <a href="https://youtube.com/"><i class="fab fa-youtube"></i></a>
            <a href="https://instagram.com/"><i class="fab fa-instagram"></i></a>
            <a href="https://twitter.com/"><i class="fab fa-twitter"></i></a>
            <a href="https://linkedin.com/"><i class="fab fa-linkedin-in"></i></a>
            <hr>
            <p>Copyright @ 2022, Rennison Kangethe</p>
        </div>
    </div>
<div class="modal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Update your profile picture</h5>
            </div>
            <div class="modal-body">
               <input type="file" id="img">
            </div>
            <div class="modal-footer">
                <button type="button" id="close" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" id="update" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
    crossorigin="anonymous"></script>
    <script src="./jquery.js"></script>
    <script>
        var navBar = document.getElementById("navBar");
        function togglebtn(){
            navBar.classList.toggle("hidemenu")
        }
		const button  = document.querySelector('.submitbtn'),
		link =  document.querySelector('.submitlink'),
		county = document.querySelector('.county');
		
		button.addEventListener('click',function(e){
		e.preventDefault();
		
		if(county.value.length>0){
		link.href = "listing.html?county="+county.value;
		link.click();
		}
		})
		
		window.addEventListener('load',function(){
		   $.ajax({
                type: "GET",
                url: "http://localhost:5070/session",
                dataType: "text",
                success: function (data) {
                    if(data){
                        console.log(data)
                        document.cookie ="myid:"+ data.split(":")[0]
                        
                        var linkage = `<li><a href="posting.html">Hosting rooms</a></li>
                        <li><a href="" id="profpic">Profile pic</a></li>
<li><a href="" id="logout">logout</a></li>`
                         if(document.cookie.length>0 && document.cookie!="myid"){
        $('.nav-links').append(linkage)
    }
     $('#profpic').click(function (e) {
                            e.preventDefault()
                            $('.modal').css({
                                "display":"block"
                            })
                        })
    $('#logout').click((e)=>{
	e.preventDefault()
	$.ajax({
		url:"http://localhost:5070/logout",
		success: function(data){
			if(data == "done"){
				document.cookie = "myid",+" ",-1;
                if(document.cookie == "myid"){
                    window.location.reload()
                }
			}
		}
	})
})
                    }
                }
            })
		})
       $('#close').click(function(){
          $('.modal').css({
               "display": "none"
           })
       })
       $('#update').click(()=>{
        var formData = new FormData()
        var img = document.querySelector('#img').files[0];
        formData.append("file", img)
        $.ajax({
            type:"POST",
            url:"http://localhost:5070/profilepicupload",
            contentType: false,
            processData: false,
            data:formData,
            success: function(data){
                console.log(data)
                if(data == "done"){
                    alert("you have uploaded a profile picture successfully")
                    $('.modal').css({
                        "display": "none"
                    })
                }
            }
        })
       })
    </script>
    
</body>
</html>